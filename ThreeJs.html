<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js"
      type="text/javascript"
    ></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r92/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r92/examples/js/controls/OrbitControls.js"></script>

    <script type="module" src="index.js"></script>
  </head>

  <body style="margin: 0">
    <div class="container">
      <h1>3D MODEL</h1>
      <div class="threejsContainer"></div>
      <div>
        <h1>Paragraph</h1>
        <p>
          lorem ipsum dolor sit amet, consectetur adiplorem ipsum dolor sit
          amet, consectetur adiplorem ipsum dolor sit amet, consectetur
          adiplorem ipsum dolor sit amet, consectetur adiplorem ipsum dolor sit
          amet, consectetur adiplorem ipsum dolor sit amet, consectetur
          adiplorem ipsum dolor sit amet, consectetur adiplorem ipsum dolor sit
          amet, consectetur adiplorem ipsum dolor sit amet, consectetur
          adiplorem ipsum dolor sit amet, consectetur adip
        </p>
      </div>
    </div>
  </body>
</html>

<!-- <script type="module">
  /* import { gsap } from "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js";
  import { ScrollTrigger } from "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/ScrollTrigger.min.js";
  import * as THREE from "https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js";
  
  import { GLTFLoader } from "https://unpkg.com/three@0.120.0/examples/jsm/loaders/GLTFLoader.js";
  import { OrbitControls } from "https://unpkg.com/three@0.120.0/examples/jsm/controls/OrbitControls.js";
  import { GUI } from "https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"; */

  /* import * as THREE from "./node_modules/three/build/three.js";
  import gsap from "/gsap";
  import ScrollTrigger from "/gsap/ScrollTrigger";

  import { GUI } from "/dat.gui";
  import { OrbitControls } from "/three/examples/jsm/controls/OrbitControls.js"; */

  //THREE JS
  const scene = new THREE.Scene();
  scene.background = null;
  const camera = new THREE.PerspectiveCamera(
    50,
    window.innerWidth / window.innerHeight,
    1,
    1000
  );

  const renderer = new THREE.WebGLRenderer({
    /* alpha: true,  */ antialias: true,
  });
  renderer.setSize(window.innerWidth, window.innerHeight);
  const container = document.querySelector(".threejsContainer");

  container.append(renderer.domElement);

  //const gui = new GUI();

  gsap.registerPlugin(ScrollTrigger);

  const tl = gsap.timeline();

  const loader = new THREE.GLTFLoader();

  let model;

  loader.load(
    "prestat-open-correct.glb",

    (gltf) => {
      model = gltf.scene;

      // Set the models initial scale
      model.scale.set(4, 4, 4);
      model.position.set(0, 0, 0);
      model.rotation.set(0.5, -1, 0);

      // Add the model to the scene
      /* const modelFolder = gui.addFolder("3D Model");
      modelFolder.add(model.position, "x", -5, 20);
      modelFolder.add(model.position, "y", -5, 20);
      modelFolder.add(model.position, "z", -5, 20);
      modelFolder.add(model.rotation, "x", -5, 20);
      modelFolder.add(model.rotation, "y", -5, 20);
      modelFolder.add(model.rotation, "z", -5, 20);
      modelFolder.open(); */

      //GSAP
      tl.to(
        model.rotation,
        {
          x: 1,
          y: -2,
          duration: 1,
        },
        0
      )
        .to(
          camera.position,
          {
            z: cameraZ + 1,
            duration: 1,
          },
          0
        )
        .to(
          model.rotation,
          {
            x: 5,
            y: 1.2,
            duration: 2,
          },
          1
        )
        .to(
          model.position,
          {
            y: -0.5,
            duration: 0.5,
            delay: 0.5,
          },
          1
        )
        .to(
          camera.position,
          {
            z: cameraZ <= 3 ? 1.5 : cameraZ - 1.5,
            duration: 0.5,
            delay: 0.5,
          },
          1
        )
        .to(
          model.position,
          {
            y: 0,
            duration: 4,
          },
          2
        )
        .to(
          camera.position,
          {
            z: cameraZ,
            duration: 1,
          },
          6
        )
        .to(
          model.rotation,
          {
            x: 13,
            y: 5,
            duration: 4,
            delay: 0.2,
          },
          6
        );

      ScrollTrigger.create({
        trigger: ".threejsContainer",
        animation: tl,
        start: "top",
        end: "bottom",
        scrub: true,
        markers: true,
        pin: true,
      });

      scene.add(model);
    },
    undefined,
    function (error) {
      console.error(error);
    }
  );

  const light = new THREE.PointLight(0xffffff, 1);
  light.position.set(0, 5, 10);
  scene.add(light);

  const pointLight = new THREE.PointLight();
  //scene.add(pointLight);

  let uniforms = {
    colorB: { type: "vec3", value: new THREE.Color("#ccc") },
    colorA: { type: "vec3", value: new THREE.Color("#fff") },
  };

  const geometry = new THREE.BoxGeometry();

  const material = new THREE.MeshToonMaterial();
  //const material = new THREE.MeshPhysicalMaterial({ color: "#fff" });

  /* const material = new THREE.ShaderMaterial({
          uniforms: uniforms,
          fragmentShader: fragmentShader(),
          vertexShader: vertexShader(),
        }); */

  const box = new THREE.Mesh(geometry, material);
  box.scale.set(1, 1, 1);
  scene.add(box);

  camera.position.set(0, 0, 2);

  function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
  }

  const tl = gsap.timeline();

  tl.to(
    box.rotation,
    {
      x: 4,
      y: 4,
      duration: 2,
    },
    0
  ).to(
    camera.position,
    {
      z: 5,
      duration: 2,
    },
    0
  );

  /* const lightPointFolder = gui.addFolder("Light POINT");
  lightPointFolder.add(pointLight.position, "x", -5, 10);
  lightPointFolder.add(pointLight.position, "y", -5, 10);
  lightPointFolder.add(pointLight.position, "z", -5, 10);
  lightPointFolder.open();
  const lightFolder = gui.addFolder("Light");
  lightFolder.add(light.position, "x", -5, 10);
  lightFolder.add(light.position, "y", -5, 10);
  lightFolder.add(light.position, "z", -5, 10);
  lightFolder.open();
  const cameraFolder = gui.addFolder("Camera");
  cameraFolder.add(camera.position, "x", -10, 10);
  cameraFolder.add(camera.position, "y", -10, 10);
  cameraFolder.add(camera.position, "z", -10, 10);
  cameraFolder.add(camera.rotation, "x", -10, 10);
  cameraFolder.add(camera.rotation, "y", -10, 10);
  cameraFolder.add(camera.rotation, "z", -10, 10);
  cameraFolder.open(); */

  //gui.destroy();

  gsap.to("h1", {
    x: 200,
  });

  /* const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableZoom = true;
        controls.enabled = true;
        controls.target.set(0, 0, 0); */

  animate();

  function resizeRendererToDisplaySize(container, renderer) {
    const canvas = container;
    var width = window.innerWidth;
    var height = window.innerHeight;
    var canvasPixelWidth = canvas.width / window.devicePixelRatio;
    var canvasPixelHeight = canvas.height / window.devicePixelRatio;

    renderer.setSize(width, height, false);
  }

  const setSize = (container, camera, renderer) => {
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();

    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
  };

  window.addEventListener("resize", () =>
    //setSize(container, camera, renderer)
    //resizeRendererToDisplaySize(container, renderer)
    renderer.setSize(window.innerWidth, window.innerHeight, false)
  );
</script>
 -->
